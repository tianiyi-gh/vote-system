import{d as e,r as a,a as t,o as s,c as l,b as i,e as n,f as o,g as u,w as c,u as v,h as d,i as r,F as m,j as p,t as h,k as g}from"./index-bee774cb.js";import{d as f}from"./dayjs.min-5064d808.js";import{s as y,_}from"./_plugin-vue_export-helper-2404cc8e.js";const x={class:"home-page"},b={class:"search-section"},I={class:"container"},V=["onClick"],k={class:"activity-title"},w={class:"activity-subtitle"},C={class:"activity-info"},T={class:"region-text"},j={class:"time-text"},U={class:"activity-stats"},H={key:0,class:"empty-state"},D=_(e({__name:"Home",setup(e){const _=v(),D=a([]),M=a(!1),R=a(!1),$=a(!1),q=a(""),z=a(["欢迎参与投票活动，请选择您支持的候选人","投票时间：每日00:00-23:59","每人每天限投1票，严禁刷票行为"]),F=a(""),L=t({current:1,size:10,total:0}),P=async()=>{try{const e=await B();0===e.length?R.value=!0:(D.value.push(...e),L.current++)}catch(e){y("加载失败")}finally{M.value=!1}},S=async()=>{D.value=[],L.current=1,R.value=!1,await P(),$.value=!1},A=()=>{_.push(`/search?q=${encodeURIComponent(q.value)}`)},B=async()=>{await new Promise(e=>setTimeout(e,1e3));return[{id:1,serviceId:"vote_202501",title:"最美乡村评选",subtitle:"寻找我们身边的美丽乡村",coverImage:"https://via.placeholder.com/300x200",region:"山东",status:1,startTime:"2025-01-01 00:00:00",endTime:"2025-12-31 23:59:59",totalVotes:12345,candidateCount:56},{id:2,serviceId:"vote_202502",title:"优秀教师评选",subtitle:"表彰辛勤付出的优秀教师",coverImage:"https://via.placeholder.com/300x200",region:"济南",status:1,startTime:"2025-03-01 00:00:00",endTime:"2025-06-30 23:59:59",totalVotes:8765,candidateCount:32}]},E=e=>({0:"未开始",1:"进行中",2:"已结束"}[e]||"未知");return s(()=>{(()=>{let e=0;setInterval(()=>{F.value=z.value[e],e=(e+1)%z.value.length},3e3)})()}),(e,a)=>{const t=d("van-nav-bar"),s=d("van-notice-bar"),v=d("van-search"),L=d("van-image"),B=d("van-tag"),G=d("van-card"),J=d("van-list"),K=d("van-pull-refresh");return r(),l("div",x,[i(t,{title:"投票活动",fixed:""}),z.value.length>0?(r(),n(s,{key:0,"left-icon":"volume-o",text:F.value},null,8,["text"])):o("",!0),u("div",b,[i(v,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),placeholder:"搜索活动...",onSearch:A,background:"#f7f8fa"},null,8,["modelValue"])]),u("div",I,[i(K,{modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value=e),onRefresh:S},{default:c(()=>[i(J,{loading:M.value,"onUpdate:loading":a[1]||(a[1]=e=>M.value=e),finished:R.value,"finished-text":"没有更多了",onLoad:P},{default:c(()=>[(r(!0),l(m,null,p(D.value,e=>(r(),l("div",{key:e.id,class:"activity-card",onClick:a=>(e=>{2!==e.status?_.push(`/vote/${e.serviceId}`):y("活动已结束")})(e)},[i(G,null,{thumb:c(()=>[i(L,{src:e.coverImage||"/default-activity.png",width:"100%",height:"100%",fit:"cover"},null,8,["src"])]),title:c(()=>[u("div",k,h(e.title),1),u("div",w,h(e.subtitle),1)]),desc:c(()=>{return[u("div",C,[i(B,{type:(t=e.status,{0:"warning",1:"success",2:"danger"}[t]||"default")},{default:c(()=>[g(h(E(e.status)),1)]),_:2},1032,["type"]),u("span",T,h(e.region),1),u("span",j,h((a=e.endTime,f(a).format("MM-DD HH:mm")))+"结束",1)])];var a,t}),footer:c(()=>[u("div",U,[u("span",null,h(e.totalVotes||0)+"人参与",1),u("span",null,h(e.candidateCount||0)+"个候选人",1)])]),_:2},1024)],8,V))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"]),M.value||0!==D.value.length?o("",!0):(r(),l("div",H,[i(L,{src:"/empty-activity.png",class:"empty-image"}),a[3]||(a[3]=u("div",{class:"empty-text"},"暂无活动",-1))]))])])}}}),[["__scopeId","data-v-0a873a21"]]);export{D as default};
